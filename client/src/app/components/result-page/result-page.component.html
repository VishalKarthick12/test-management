<div class="min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-3xl mx-auto" *ngIf="attempt">

        <!-- Score Card -->
        <div
            class="bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg mb-8 text-center p-8 transition-colors duration-200">
            <h2 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-4">Test Results</h2>

            <div class="flex justify-center items-center mb-6">
                <div class="rounded-full h-32 w-32 flex items-center justify-center border-4"
                    [ngClass]="passed ? 'border-green-500 text-green-600 dark:text-green-400' : 'border-red-500 text-red-600 dark:text-red-400'">
                    <span class="text-3xl font-bold">{{ percentage | number:'1.0-0' }}%</span>
                </div>
            </div>

            <h3 class="text-xl font-medium"
                [ngClass]="passed ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'">
                {{ passed ? 'Passed Successfully!' : 'Better Luck Next Time' }}
            </h3>

            <div class="mt-6 grid grid-cols-3 gap-4 text-center">
                <div class="bg-indigo-50 dark:bg-indigo-900 p-4 rounded-lg">
                    <span class="block text-2xl font-bold text-indigo-700 dark:text-indigo-300">{{ attempt.score
                        }}</span>
                    <span class="text-sm text-indigo-600 dark:text-indigo-400">Correct</span>
                </div>
                <div class="bg-red-50 dark:bg-red-900 p-4 rounded-lg">
                    <span class="block text-2xl font-bold text-red-700 dark:text-red-300">{{ attempt.totalQuestions -
                        attempt.score }}</span>
                    <span class="text-sm text-red-600 dark:text-red-400">Wrong</span>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                    <span class="block text-2xl font-bold text-gray-700 dark:text-gray-300">{{ attempt.timeTaken |
                        number:'1.0-0' }}s</span>
                    <span class="text-sm text-gray-600 dark:text-gray-400">Time Taken</span>
                </div>
            </div>
        </div>

        <div class="flex justify-center space-x-4">
            <a routerLink="/student"
                class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-indigo-700 bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900 dark:text-indigo-200 dark:hover:bg-indigo-800 transition-colors">
                Back to Dashboard
            </a>
            <button *ngIf="passed" (click)="downloadCertificate()"
                class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none transition-colors">
                Download Certificate
            </button>
        </div>

    </div>

    <div *ngIf="loading" class="text-center mt-20">
        <p class="text-gray-500 dark:text-gray-400">Loading results...</p>
    </div>
</div>